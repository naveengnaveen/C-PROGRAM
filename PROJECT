#include<stdio.h>
#include <stdlib.h>

#define MAX_CATEGORIES 10
#define MAX_ITEMS_PER_CATEGORY 10

struct Product
{
    char name[10];
    double price;
    int quantity;

};

void inputProduct(struct Product *product)
{
    printf("Enter the product name : ");
    scanf("%s", &product->name);
    printf("Enter the product price : ");
    scanf("%lf", &product->price);
    printf("Enter available quantity : ");
    scanf("%d", &product->quantity);
}

int main()
{
    struct Product products[MAX_CATEGORIES][MAX_ITEMS_PER_CATEGORY];

    int numCategories, numItems;

    printf("WELCOME TO MY E-COMMERCE STORE!!\n");
    printf("Enter the number of product categories : ");
    scanf("%d", &numCategories);

    for(int i=0; i < numCategories; ++i)
    {
        printf("\nCategory %d: \n", i + 1);
        printf("Enter the number of items in this categories : ");
        scanf("%d", &numItems);

        for(int j=0; j < numItems; ++j)
        {
            printf("\nItem %d:\n", j + 1);
            inputProduct(&products[i][j]);
        }
    }

    printf("\nAvailable products : \n");
    for(int i=0; i < numCategories; ++i)
    {
        for(int j=0; j < numItems; ++j)
        {
            printf("%s($.%lf) -  Quantity : %d\n", products[i][j].name, products[i][j].price, products[i][j].quantity);
        }
    }

    char purchasedItem[10];
    printf("\nEnter the name of the product you like to buy : ");
    scanf("%s", &purchasedItem);

    for(int i=0; i < numCategories; ++i)
    {
        for(int j=0; j < numItems; ++j)
        {
            if(strcmp(purchasedItem,products[i][j].name)==0)
            {
                if(products[i][j].quantity > 0)
                {
                    products[i][j].quantity--;
                    printf("Purchase successful! Remaining quantity : %d\n", products[i][j].quantity);
                }
                else
                {
                    printf("Sorry!,This item is out of stock!!");
                }
                return 0;
            }
        }
    }

    printf("Product not found!. Please check the spelling and tryÂ again...");


}
